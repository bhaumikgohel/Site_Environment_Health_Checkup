<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Check Dashboard | AI-Powered with Ollama LLM 3.2</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>üè• Environment Health Check</h1>
            <p>Automated Sanity & Performance Validation <span id="aiBadge" class="ai-badge hidden">‚Ä¢ ü§ñ AI Ready</span></p>
        </header>

        <main>
            <section class="config-panel">
                <div class="card">
                    <div class="card-header">
                        <h2>Configuration</h2>
                        <div class="env-selector">
                            <label>Env:</label>
                            <select id="envDropdown">
                                <option value="Dev">Dev</option>
                                <option value="QA" selected>QA</option>
                                <option value="Alpha">Alpha</option>
                                <option value="Beta">Beta</option>
                                <option value="Production">Production</option>
                            </select>
                        </div>
                    </div>
                    <form id="healthForm">
                        <div class="form-group">
                            <label>Base URL</label>
                            <input type="url" id="baseUrl" value="" required>
                        </div>
                        <div class="row">
                            <div class="form-group">
                                <label>Username</label>
                                <input type="text" id="username" value="" required>
                            </div>
                            <div class="form-group">
                                <label>Password</label>
                                <input type="password" id="password" value="" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Dashboard URL (Post-Login)</label>
                            <input type="text" id="dashboardUrl" value="" required>
                        </div>
                        <div class="row">
                            <div class="form-group">
                                <label>User Locator <span class="optional">(optional)</span></label>
                                <input type="text" id="selectorUser" value="" placeholder='input[id="txt_username"] or //input[@id="username"]'>
                            </div>
                            <div class="form-group">
                                <label>Pass Locator <span class="optional">(optional)</span></label>
                                <input type="text" id="selectorPass" value="" placeholder='input[id="txt_password"] or //input[@type="password"]'>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group">
                                <label>Login Button Locator <span class="optional">(optional)</span></label>
                                <input type="text" id="selectorBtn" value="" placeholder='button[id="btn_login"] or //button[text()="Login"]'>
                            </div>
                            <div class="form-group">
                                <label>Error Message Text <span class="optional">(optional)</span></label>
                                <input type="text" id="errorMsg" value=""
                                    placeholder="Text to verify on invalid login (e.g., 'Invalid credentials')">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>API Endpoint for Health Check</label>
                            <input type="text" id="apiEndpoint" value="">
                        </div>
                        <div class="button-group">
                            <button type="submit" id="runBtn">Run Health Check</button>
                            <button type="button" id="archiveBtn" class="btn-secondary">Archive Config</button>
                        </div>
                    </form>
                </div>
            </section>

            <section class="status-panel">
                <div id="statusIndicator" class="card status-card idle">
                    <div class="status-content">
                        <span class="status-label">Overall Status</span>
                        <h2 id="overallStatus">-</h2>
                    </div>
                    <div id="loader" class="loader hidden"></div>
                </div>

                <div class="card report-card">
                    <h2>Validation Report</h2>
                    <div class="table-container">
                        <table id="reportTable">
                            <thead>
                                <tr>
                                    <th>Check</th>
                                    <th>Status</th>
                                    <th>Latency</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Results will be injected here -->
                            </tbody>
                        </table>
                    </div>
                    <div class="report-actions">
                        <button id="downloadBtn" class="btn-secondary hidden">Download HTML Report</button>
                    </div>
                </div>

                <div class="card history-card">
                    <h2>Run History</h2>
                    <div class="table-container">
                        <table id="historyTable">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>Env</th>
                                    <th>Status</th>
                                    <th>Performance</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- History will be injected here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <script src="app.js"></script>
</body>

</html>